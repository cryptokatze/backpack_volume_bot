# main_tui.py 왕초보 실행 가이드

처음부터 끝까지 그대로 따라 하면 `main_tui.py`를 실행할 수 있는 초간단 안내서입니다. 가상환경 만들기부터 .env 작성, 실행 후 조작까지 한 번에 정리했습니다.

https://katze.tistory.com/entry/backpack-bot
vscode WSL기반으로 실행하는 법은 블로그에 있습니다.

## 0. main_tui.py가 하는 일
- 터미널 화면에서 심볼/수량/대기 시간 등을 설정하고, 매수→매도 주문 세트를 반복 실행하는 텍스트 UI입니다.
- `.env`에 API 키가 없으면 자동으로 **모의 모드**(실제 주문 없음)로, 키를 넣으면 **실거래 모드**로 동작합니다.

## 1. Python 준비 확인
- IDE or 리눅스 기반 터미널(또는 PowerShell)에서 버전을 확인합니다. 3.10 이상이면 OK.

```bash
python --version
# 또는
python3 --version
```

안되면 자신이 선호하는 LLM 엔진에게 질문을 하세요.

https://katze.tistory.com/entry/vibe-coding-1
윈도우 환경에서는 WSL을 이용해 레포지토리를 클론하고 리눅스 명령어 기반으로 실행한다면 수월하게 실행이 가능합니다. 

## 2. 코드 내려받기
### (추천) Git 사용
```bash
git clone https://github.com/cryptokatze/backpack_auto_vol.git
cd backpack_auto_vol
```

### ZIP으로 받기
1) GitHub에서 `Download ZIP` → 압축 풀기  
2) 터미널에서 풀린 폴더로 이동:
```bash
cd path/to/backpack_auto_vol
```

## 3. 가상환경 만들기 & 켜기
프로젝트 폴더 안에서 아래를 실행합니다.

```bash
python3 -m venv .venv
```

- macOS / Linux:
```bash
source .venv/bin/activate
```
- Windows (PowerShell):
```powershell
.\.venv\Scripts\Activate.ps1
```

터미널 프롬프트에 `(venv)` 비슷한 표시가 뜨면 켜진 것입니다.

## 4. 필요한 라이브러리 설치
가상환경이 켜진 상태에서:

```bash
pip install -r requirements.txt
```

## 5. .env 파일 만들기
프로젝트 루트(README와 main_tui.py가 있는 위치)에 `.env` 파일을 새로 만듭니다. 아래 둘 중 하나로 채워 넣으세요.

### 5-1) 모의 모드(처음에는 이걸 추천)
```
BACKPACK_API_KEY=
BACKPACK_API_SECRET=
BACKPACK_BASE_URL=https://api.backpack.exchange
BACKPACK_WINDOW_MS=5000
```
- 키를 비워 두면 실제 주문 없이 흐름만 테스트합니다.

### 5-2) 실거래 모드 (주문이 실제로 나감 ⚠️)
```
BACKPACK_API_KEY=여기에_API_KEY
BACKPACK_API_SECRET=여기에_API_SECRET
BACKPACK_BASE_URL=https://api.backpack.exchange
BACKPACK_WINDOW_MS=5000
```
- 공백/따옴표 없이 붙여 넣으세요.
- 먼저 모의 모드로 충분히 테스트 후, 정말 필요할 때만 키를 넣는 것을 권장합니다.

## 6. (선택) .env가 읽히는지 빠른 점검
```bash
python - << 'EOF'
import os
from dotenv import load_dotenv
load_dotenv()
print("API_KEY =", os.getenv("BACKPACK_API_KEY"))
print("SECRET  =", os.getenv("BACKPACK_API_SECRET"))
EOF
```
- 둘 다 `None`이 아니면 성공입니다. `None`이면 파일 위치/이름을 다시 확인하세요.

## 7. main_tui.py 실행
- 가상환경이 켜진 상태로:
```bash
python main_tui.py
# 또는
python3 main_tui.py
```
- 처음에 `디버그 로그 출력? (y/N):`가 나오면 Enter(기본 N) 또는 `y` 입력.
- 화면에 **API 모드**가 `모의/실거래`로 표시됩니다. 모의 모드 문구가 보이면 키가 비어 있다는 뜻입니다.

## 8. 메뉴 사용법 한눈에 보기
실행 후 나오는 기본 메뉴:
- 1) 잔고/포지션 확인: 실시간으로 표시, Enter를 누르면 메뉴로 돌아옵니다.
- 2) 현재 설정으로 주문 실행: 기본값은 `심볼=SOL`, `수량=0.01`, `각 방향 주문 1회`, `세트 반복 1회`, `대기 1~3초`. 실행 중에는 아래 9번 단축키로 제어합니다.
- 3) 모든 포지션 청산: 현재 심볼 기준 포지션을 정리합니다.
- 4) 설정 변경: 심볼/수량/주문 횟수/반복 횟수/대기 시간을 원하는 값으로 입력합니다. 반복 횟수에 `0`을 넣으면 무한 반복입니다.
- 5) 종료: 프로그램을 닫습니다.

주문 루틴 설정 가이드 (쉬운 버전)
옵션 번호 4를 선택하고 엔터를 누르면, 이제 원하는 심볼(티커), 주문 수량, 그리고 각 방향 주문 횟수를 입력하는 단계로 넘어갑니다.

예를 들어,
BTC, 0.01, 3을 입력했다면:
BTC 0.01개 매수 3번 연속 실행
BTC 0.01개 매도 3번 연속 실행

이렇게 한 세트로 구성된 루틴이 만들어집니다.
즉, 설정한 티커와 수량으로 매수를 3번 → 매도를 3번 순서대로 넣는 구조입니다.
 
세트 반복 (Loop Count)
세트 반복 값은
위에서 설명한 루틴 전체를 몇 번 반복할지 결정합니다.

5 입력 → 매수/매도 세트를 총 5회 반복
0 입력 → 무한 반복

※ 무한 반복은 봇을 장시간 돌릴 때 사용하지만,
방향성 누적 익스포저 관리를 꼭 주의하세요.

대기시간 (Interval)
대기시간은 0.01초 단위로 설정할 수 있습니다.
예: 0.05 → 0.05초 간격으로 반복 실행.

다만 거래소 API 제한 때문에 주문 수량이 분당 2,000건을 넘지 않도록 꼭 조심해야 합니다.
(과도한 주문 빈도는 API 먹통 리스크가 있습니다.)


설정 이후에는 2번을 눌러 세팅한대로 주문을 넣으면 되며 포지션은 모바일 앱이나, Web을 통해서 확인해주세요.
 
<img width="607" height="102" alt="image" src="https://github.com/user-attachments/assets/faf4ede8-da62-4a12-aa07-0abea89fe48f" />


**대기는 0.01초단위로도 설정할 수 있지만 모든 주문 포함해서 분당 2000번이 넘어가면 안됨**** 

Wash Trading 패널티 방지를 위한 최소 5초 이상 설정하길 바랍니다 홀딩시간이 길 수록 시장 델타 노출에 대한 리스크도 커지지만, 워시 트레이딩에 걸릴 확률로 낮출 수 있음

저빈도 거래를 원할 시에는 소액으로 테스트해보고 정상적으로 포인트가 들어오는지 확인한 이후에 계속하시길 바랍니다.

## 9. 주문 실행 중 단축키
주문이 돌아가는 동안 터미널에 입력할 수 있습니다.
- `p` : 일시중지
- `r` : 재개
- `q` : 현재 진행 중인 사이클을 마치고 종료
- `c` : 가능한 포지션을 청산한 뒤 종료

## 10. 자주 묻는 질문/에러
- `API 키/시크릿이 없어 모의 모드로 시작` 문구: 정상입니다. 키를 넣지 않은 상태입니다.
- `Invalid signature` 에러: Secret이 잘못됐거나 공백/줄바꿈이 섞였을 가능성이 큽니다. 새 키를 발급받아 깨끗하게 붙여 넣으세요.
- HTTP 4xx/5xx 에러: 터미널 로그 전체를 복사해 두면 원인 파악에 도움이 됩니다.

여기까지 따르면: Python 확인 → 가상환경 → 의존성 설치 → .env 작성 → `python main_tui.py` 실행 → 메뉴로 주문/청산/설정 변경까지 완료할 수 있습니다.

## ⚠️ 면책 조항 (Disclaimer)

본 레포지토리 및 이와 관련된 모든 문서·코드·예제·설명(이하 “자료”)은 투자 조언, 금융 권유, 법률 자문, 세무 자문, 기술적 보증 등 어떠한 형태의 전문적 조언을 제공하지 않습니다.

본 자료는 순수하게 학습·연구·실험 목적이며, 작성자 또는 기여자는 자료의 정확성, 안정성, 완전성, 최신성에 대해 어떠한 보증도 제공하지 않습니다.

자료를 사용하여 발생하는 모든 결과(손실, 오류, 시스템 오작동, 계정 문제, API 변경, 예기치 못한 프로그램 동작, 네트워크 지연, 블록체인 수수료 손실, 포지션 청산 포함)에 대한 책임은 전적으로 사용자 본인에게 있습니다.

사용자는 자료를 사용하는 모든 과정에서 충분한 테스트·검증·보안 조치를 취해야 하며, 자신의 판단과 책임 하에 활용해야 합니다.

본 자료는 “있는 그대로(AS IS)” 제공되며, 본 자료의 작성자·관리자·기여자는 직·간접적으로 발생하는 모든 손해 또는 손실에 대해 어떠한 경우에도 책임을 지지 않습니다.

**본 자료 사용 시, 사용자는 위 모든 내용을 이해하고 완전히 동의한 것으로 간주합니다.**
